<div class="container main-container padding-all-around">
  <a
    class="btn btn-info block"
    data-toggle="collapse"
    href="#program_language_list"
    role="button"
    aria-expanded="false"
    aria-controls="program_language_list"
  >
    Skills
  </a>
  <div
    class="collapse"
    id="program_language_list"
    style="margin: 10px 0px 10px 0px"
  >
    <div class="card card-body primary-background-color">
      <div class="row">
        <div class="col-6">
          <ul id="skill_list"></ul>
        </div>
        <div class="col-6">
          <ul id="skill_list_2"></ul>
        </div>
      </div>
    </div>
  </div>
  <a
    class="btn btn-info block"
    data-toggle="collapse"
    href="#experience_list_render"
    role="button"
    aria-expanded="false"
    aria-controls="experience_list_render"
  >
    Experiences
  </a>
  <div
    class="collapse"
    id="experience_list_render"
    style="margin: 10px 0px 10px 0px"
  >
    <div
      class="card card-body primary-background-color"
      id="experience_data"
    ></div>
  </div>

  <a
    class="btn btn-info block"
    data-toggle="collapse"
    href="#project_render"
    role="button"
    aria-expanded="false"
    aria-controls="project_render"
  >
    Project
  </a>
  <div class="collapse" id="project_render" style="margin: 10px 0px 10px 0px">
    <div
      class="card card-body primary-background-color"
      id="project_data"
    ></div>
  </div>
</div>

<script>
  $(document).ready(function () {
    $.getJSON("assets/data/skill_data.json", function (data) {
      var skill_array = data.skill_array;
      skill_array.sort(function (a, b) {
        let x = a.toLowerCase(),
          y = b.toLowerCase();
        if (x < y) {
          return -1;
        }
        if (y < x) {
          return 1;
        }
        return 0;
      });
      for (var i = 0; i < skill_array.length; i++) {
        var li = $("<li>").text(skill_array[i]);
        if (i < skill_array.length / 2) {
          $("#skill_list").append(li);
        } else {
          $("#skill_list_2").append(li);
        }
      }
    });

    $.getJSON("assets/data/experience_list_data.json", function (data) {
      var Gameplay = data.experience_list.Gameplay;
      generate_experience_list(
        Gameplay.title,
        Gameplay.description,
        Gameplay.date,
        Gameplay.skill
      );
      var Atgworks = data.experience_list.Atgworks;
      generate_experience_list(
        Atgworks.title,
        Atgworks.description,
        Atgworks.date,
        Atgworks.skill
      );
      var GeorgiaGames = data.experience_list.GeorgiaGames;
      generate_experience_list(
        GeorgiaGames.title,
        GeorgiaGames.description,
        GeorgiaGames.date,
        GeorgiaGames.skill
      );
    });

    function generate_experience_list(title, descirption, date, skill) {
      var row = $("<div>").attr("class", "row");
      var col1 = $("<div>").attr("class", "col-6");
      var col2 = $("<div>").attr("class", "col-6");

      var new_title = $("<h4>");
      var strong = $("<strong>").text(title);
      col1.append(new_title);
      var new_date = $("<p>").text(date);
      new_date.attr("class", "experience_date");
      col2.append(new_date);

      if (Array.isArray(descirption)) {
        var new_description = $("<div>");
        for (var i = 0; i < descirption.length; i++) {
          var descirption_text = $("<p>").text(descirption[i]);
          new_description.append(descirption_text);
        }
      } else {
        var new_description = $("<p>").text(descirption);
      }

      var skill_div = $("<div>");
      var skill_title = $("<h5>").text("Software use on project:");
      var new_skill = $("<ul>");
      for (var i = 0; i < skill.length; i++) {
        var skill_text = $("<li>").text(skill[i]);
        new_skill.append(skill_text);
      }

      new_title.append(strong);

      skill_div.append(skill_title, new_skill);

      row.append(col1, col2);

      $("#experience_data").append(row, new_description, skill_div);
    }
  });
</script>
